[gcode_macro CANCEL_PRINT]
description: CYD_SCREEN_MACRO
rename_existing: CANCEL_PRINT_BASE
gcode:
  TURN_OFF_HEATERS
  CANCEL_PRINT_BASE
  G28 X Y


[gcode_macro UNLOAD_FILAMENT]
description: CYD_SCREEN_MACRO
gcode:
    M104 S200                  ; Set extruder temperature to 200°C
    M109 S200                  ; Wait for extruder temperature to reach 200°C
    G92 E0                      ; Reset the extruder position
    G1 E-120 F300              ; Retract the filament by 120mm at a speed of 300mm/min
    G92 E0                      ; Reset the extruder position again
    M104 S0                    ; Turn off the extruder heater (optional)

[gcode_macro LOAD_FILAMENT]
description: CYD_SCREEN_MACRO
gcode:
    M104 S200                  ; Set extruder temperature to 200°C
    M109 S200                  ; Wait for extruder temperature to reach 200°C
    G92 E0                      ; Reset the extruder position
    G1 E120 F300               ; Feed 120mm of filament at a speed of 300mm/min
    G92 E0                      ; Reset the extruder position again
    M104 S0                    ; Turn off the extruder heater (optional)

[gcode_macro EXTRUDE_10MM]
description: CYD_SCREEN_MACRO
gcode:
    M104 S200                 ; Heat extruder to 200°C
    M109 S200                 ; Wait for extruder to reach 200°C
    G92 E0                    ; Reset extruder position
    G1 E10 F300               ; Extrude 10mm of filament
    G92 E0                    ; Reset extruder position

[gcode_macro PAUSE_PRINT]
description: CYD_SCREEN_MACRO
gcode:
    # Save current position and extruder state
    SAVE_GCODE_STATE NAME=PAUSE_STATE
    
    # Retract filament by 5mm (adjust this value if needed)
    G91
    G1 E-5 F300
    
    # Move Z up by 10mm to avoid damaging the print
    G1 Z10 F6000
    
    # Switch back to absolute positioning
    G90
    
    # Move the nozzle to the side (adjust X/Y as needed for your machine)
    G1 X0 Y0 F6000
    
    # Pause the print
    M0

[gcode_macro RESUME_PRINT]
description: CYD_SCREEN_MACRO
gcode:
    # Restore saved state
    RESTORE_GCODE_STATE NAME=PAUSE_STATE

[gcode_macro COOL_DOWN]
description: CYD_SCREEN_MACRO
gcode:
    M104 S0                   ; Turn off extruder heater
    M140 S0                   ; Turn off bed heater
    M107                      ; Turn off fan

[gcode_macro PRINT_STATS]
description: CYD_SCREEN_MACRO
gcode:
    M117 Print Time: {print_time} ; Display print time
    M117 Filament Used: {filament_used} ; Display filament usage
    M117 Layer: {current_layer}/{total_layers} ; Display current layer and total layers

[gcode_macro TRAM_FRONT_LEFT]
description: CYD_SCREEN_MACRO
gcode:
    # Move to home position
    G28
    # Move to front left corner
    G1 X28 Y36 Z0 F6000
    PAUSE

[gcode_macro TRAM_FRONT_RIGHT]
description: CYD_SCREEN_MACRO
gcode:
    # Move to front right corner
    G1 X197 Y34 Z0 F6000
    PAUSE

[gcode_macro TRAM_BACK_RIGHT]
description: CYD_SCREEN_MACRO
gcode:
    # Move to back right corner
    G1 X197 Y206 Z0 F6000
    PAUSE

[gcode_macro TRAM_BACK_LEFT]
description: CYD_SCREEN_MACRO
gcode:
    # Move to back left corner
    G1 X28 Y


